

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Env Manager Overview &mdash; nerveX 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Replay Buffer Overview" href="replay_buffer_overview_en.html" />
    <link rel="prev" title="Collector Overview" href="collector_overview_en.html" />
    <link href="../_static/css/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> nerveX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_concept/index.html">Key Concept</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro_rl/index.html">Introduction to RL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hands_on/index.html">Hands on RL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../best_practice/index.html">Best Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_doc/index.html">API Doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Feature</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="algorithm_overview.html">Algorithm Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="policy_overview_en.html">Policy Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="model_overview_en.html">Model Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="env_overview_en.html">Env Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="collector_overview_en.html">Collector Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Env Manager Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#env-manager">Env Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#baseenvmanager-nervex-envs-env-manager-base-env-manager-py">BaseEnvManager (nervex/envs/env_manager/base_env_manager.py)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subprocessenvmanager-nervex-envs-env-manager-subprocess-env-manager-py">SubprocessEnvManager (nervex/envs/env_manager/subprocess_env_manager.py)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="replay_buffer_overview_en.html">Replay Buffer Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="learner_overview.html">Learner Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="wrapper_hook_overview_en.html">Wrapper &amp; Hook Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="league_overview_en.html">League Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc_rl_overview_en.html">HPC_RL Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataloader_overview.html">DataLoader Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="autolog_overview.html">Autolog Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="interaction_overview_en.html">Interaction Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="loader_overview_en.html">Loader Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../supplementary_rl/index.html">Supplementary of RL</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial_dev/index.html">Tutorial-Developer</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">nerveX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Feature</a> &raquo;</li>
        
      <li>Env Manager Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/feature/env_manager_overview_en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="env-manager-overview">
<h1>Env Manager Overview<a class="headerlink" href="#env-manager-overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="env-manager">
<h2>Env Manager<a class="headerlink" href="#env-manager" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>Overview:</dt><dd><p>env manager is an environment manager that can manage multiple environments of the same type with different configurations. The env manager can run multiple envs at the same time,
obtain information in the environment at the same time, and provide an interface similar to env, which can greatly simplify the code and speed up the operation.
The currently supported types are single-process serial and multi-process parallel modes. BaseEnvManager maintains multiple environment instances through cyclic serial (pseudo-parallel),
and Async(Sync)SubprocessEnvManager uses subprocess vectorization, that is, call multiprocessing, by running env in a child process, manages and runs the environment by means of inter-process communication.
NerveX’s env manager needs to use the env definition in nerveX format (or Gym env decorated by EnvWrapper),
It needs to provide the instantiation interface of each env when it is initialized, and set the specific operation details through config.</p>
<p>Generally speaking, <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseEnvManager</span></code> is used to run in some simple environments or to debug, and it is recommended to run
<code class="xref py py-class docutils literal notranslate"><span class="pre">SyncSubProcessEnvManager</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSubProcessEnvManager</span></code>
in complex environments or a large number of environments for acceleration.</p>
<p>If you don’t know enough about the env module yet, it is recommended to consult NerveX’s <a class="reference external" href="./env_overview.html">Env Overview</a></p>
</dd>
<dt>Usage:</dt><dd><ul>
<li><dl>
<dt>init</dt><dd><p>The initialization of the env manager needs to pass in the instantiation call interface of each env and the config dictionary.
The lambda function or partial function <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> can be used to wrap the instantiation function of env and specify its operating parameters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">env</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">manager</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
        <span class="o">...</span>
    <span class="p">),</span>
    <span class="o">...</span>
<span class="p">)</span>

<span class="c1"># lambda function way</span>
<span class="n">env_fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="p">:</span> <span class="n">NerveXEnv</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">env_manager</span> <span class="o">=</span> <span class="n">BaseEnvManager</span><span class="p">(</span><span class="n">env_fn</span><span class="o">=</span><span class="p">[</span><span class="n">env_fn</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],</span> <span class="n">cfg</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">manager</span><span class="p">)</span>

<span class="c1"># partial function way</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="k">def</span> <span class="nf">env_fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">NerveXEnv</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">env_manager</span> <span class="o">=</span> <span class="n">BaseEnvManager</span><span class="p">(</span><span class="n">env_fn</span><span class="o">=</span><span class="p">[</span><span class="n">partial</span><span class="p">(</span><span class="n">env_fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],</span> <span class="n">cfg</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">manager</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>launch/reset</dt><dd><p>After the env manager’s initialization, each environment will not be instantiated immediately. At this time, the env manager will be marked as a <cite>closed</cite> state.
To initialize the environment for the first time, you need to call the <code class="docutils literal notranslate"><span class="pre">launch</span></code> method, which will construct each env instance according to the incoming env instantiation call interface
(for SubprocessEnvManager, it is to run the subprocess of each environment and establish a communication channel), construct Some of the state variables of the environment are running,
and the <code class="docutils literal notranslate"><span class="pre">reset</span></code> method of each sub-environment is called at the same time to run the environment.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Calling the <code class="docutils literal notranslate"><span class="pre">step</span></code> and <code class="docutils literal notranslate"><span class="pre">reset</span></code> methods of env_manager in the <cite>closed</cite> state will cause an exception.</p>
</div>
<p>After calling the <code class="docutils literal notranslate"><span class="pre">launch</span></code> method, you can manually reset the sub-environment by calling the <code class="docutils literal notranslate"><span class="pre">reset</span></code> method of the env manager.
When no parameters are passed in, all sub-environments will be reset by default.
When the <code class="docutils literal notranslate"><span class="pre">reset_param</span></code> parameter is passed in, the sub-environment corresponding to the key in <code class="docutils literal notranslate"><span class="pre">reset_param</span></code> will be reset, and its key value will be used as the parameter of the sub-environment <code class="docutils literal notranslate"><span class="pre">reset</span></code> method.
Due to the uncertainty of the time required for each sub-environment reset, the env manager will not return the corresponding observation after the step of the sub-environment ends.
Instead, it will save the return value at the end of the reset and obtain the current value by calling the <code class="docutils literal notranslate"><span class="pre">ready_obs</span></code> property.
Run the observation of the sub-environment that completes the step or reset method, which can speed up the operating efficiency of the SubprocessEnvManager.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When SubprocessEnvManager needs to reset the sub-environments that are being reset, this method will wait for the last reset of these sub-environments to complete before running this reset.</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>step</dt><dd><p>The step method will serially (BaseEnvManager) or parallel (SubprocessEnvManager) call the step method of the sub-environment of the env manager, and return the result of the step, and store the observation in the <code class="docutils literal notranslate"><span class="pre">ready_obs</span></code> attribute.
The parameter passed in this method is an <code class="docutils literal notranslate"><span class="pre">actions</span></code> dictionary, the key of which specifies the env_id that needs to run the <code class="docutils literal notranslate"><span class="pre">step</span></code>, and the key value is the action to be run by the <code class="docutils literal notranslate"><span class="pre">step</span></code> of the sub-environment.
According to different env manager types and config settings, when a certain number of sub-environments return step results, this method will check the running results,
modify the running status of the sub-environments based on these results, and return the result or throw an exception.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When <code class="docutils literal notranslate"><span class="pre">actions</span></code> contains the sub-environment id that is running other commands or has completed the episode, it will throw an exception.</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>ready_obs</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">ready_obs</span></code> attribute returns a dictionary containing the env_id of the environment and the key-value pair of the latest observation returned.
For SubprocessEnvManager, the environment id returned by the <code class="docutils literal notranslate"><span class="pre">ready_obs</span></code> attribute must be a sub-environment that has completed the reset or step method and is waiting for a new command.
Therefore, it is safe to continue to call the <code class="docutils literal notranslate"><span class="pre">reset</span></code> and <code class="docutils literal notranslate"><span class="pre">step</span></code> of these sub-environments. <code class="docutils literal notranslate"><span class="pre">Method.</span> <span class="pre">When</span> <span class="pre">all</span> <span class="pre">sub-environments</span> <span class="pre">that</span> <span class="pre">are</span> <span class="pre">still</span> <span class="pre">running</span> <span class="pre">(not</span> <span class="pre">running</span> <span class="pre">to</span> <span class="pre">done)</span> <span class="pre">have</span> <span class="pre">not</span> <span class="pre">completed</span> <span class="pre">the</span> <span class="pre">``reset</span></code> and <code class="docutils literal notranslate"><span class="pre">step</span></code> methods, calling the <code class="docutils literal notranslate"><span class="pre">ready_obs</span></code> property will wait for at least one sub-environment to finish running, and Return its observation.</p>
<p>When using SubprocessEnvManager, as long as the env_id passed to the step and reset methods is the env_id returned by the ready_obs property, there will be no repeated commands for the sub-environment.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>done</dt><dd><p>This attribute will judge the completion of all sub-environments (whether it runs to done), if it is, it returns <code class="docutils literal notranslate"><span class="pre">True</span></code>, otherwise it returns <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>close</dt><dd><p>Like Gym env’s <code class="docutils literal notranslate"><span class="pre">close</span></code> method, this method will safely close all sub-environments, destroy the processes created by the sub-environments, and release all resources.
After calling this method, the env manager will be marked as <code class="docutils literal notranslate"><span class="pre">closed</span></code>, unless it is <code class="docutils literal notranslate"><span class="pre">launch</span></code> again to continue using it.</p>
</dd>
</dl>
</li>
</ul>
</dd>
<dt>Examples:</dt><dd><p>The following is an example of an env manager running multiple environments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_env_manager</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">finished</span><span class="p">:</span>
    <span class="n">obs</span> <span class="o">=</span> <span class="n">my_env_manager</span><span class="o">.</span><span class="n">ready_obs</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># get actions from policy or else.</span>
    <span class="n">timesteps</span> <span class="o">=</span> <span class="n">my_env_manager</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">env_id</span><span class="p">,</span> <span class="n">timestep</span> <span class="ow">in</span> <span class="n">timesteps</span><span class="o">.</span><span class="n">item</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">timestep</span><span class="o">.</span><span class="n">done</span><span class="p">:</span>
            <span class="c1"># without auto_reset</span>
            <span class="n">my_env_manager</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset_param</span><span class="o">=</span><span class="p">{</span><span class="n">env_id</span><span class="p">:</span> <span class="o">...</span><span class="p">})</span>
            <span class="o">...</span>

<span class="n">my_env_manager</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Advanced features:</dt><dd><ul>
<li><dl class="simple">
<dt>auto_reset</dt><dd><p>The env manager of nerveX will automatically reset by default, that is, when an environment runs to done, it will automatically reset to continue running.
The parameters of reset are the parameters set for the sub-environment during the last manual reset, unless the number of episodes run is accumulated Reach the episode_num specified in config.
To turn off this feature, you can specify <code class="docutils literal notranslate"><span class="pre">auto_reset=False</span></code> in config</p>
</dd>
</dl>
</li>
<li><dl>
<dt>env state</dt><dd><p>In order to facilitate the management of the status of each sub-environment and facilitate debugging, the env manager of nerveX provides an enumerated type of environment status to grasp the running status of all sub-environments in real time.
The specific meaning is as follows:</p>
<ul class="simple">
<li><p>VOID: The env manager has been initialized, but the sub-environment has not yet been instantiated</p></li>
<li><p>INIT: The sub-environment has been instantiated and has not yet been launched or reset</p></li>
<li><p>RUN: sub-environment reset or step completed, running in progress</p></li>
<li><p>RESET: sub-environment resetting</p></li>
<li><p>DONE: sub-environment running to done</p></li>
<li><p>ERROR: The sub-environment has an exception occurred</p></li>
</ul>
<p>The conversion between each state is as shown in the figure:</p>
<blockquote>
<div><img alt="../_images/env_state.png" src="../_images/env_state.png" />
</div></blockquote>
</dd>
</dl>
</li>
<li><dl>
<dt>max_retry 和 timeout</dt><dd><p>In order to prevent some sub-environments from reporting errors temporarily due to connection problems, or the program will not exit normally when the sub-processes are stuck, the env manager of nerveX has added retry protection and timeout detection mechanisms.
The user can specify the maximum number of retry and the maximum waiting time for communication between reset, step and sub-processes in config. When the waiting time is exceeded, an exception will be thrown in order to terminate the operation early.
The settings and default values of these parameters in config are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">manager_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">max_retry</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="c1"># max retry times for step and reset, default to 1</span>
    <span class="n">reset_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="c1"># max waiting time for reset, default to 60s</span>
    <span class="n">retry_waiting_time</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="c1"># retry interval time for reset, default to 0.1s</span>
    <span class="n">step_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="c1"># max waiting time for rstep, default to 60s</span>
    <span class="n">step_wait_timeout</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="c1"># retry interval time for step, default to 0.1s</span>
    <span class="n">connect_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="c1"># max waiting time for communication between child processes, default to 60s</span>
<span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>difference between Sync ans Async SubprocessEnvManager</dt><dd><p>Pending</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>shared_memory</dt><dd><p>shared_memory can speed up the transfer of large vector data returned by the environment. When the size of variables such as obs returned by the environment exceeds 100kB, it is recommended to set it to True.
When using shared_memory, you need to use BaseEnvInfo and EnvElementInfo template in the environment info function to specify the dtype corresponding to the shape and value of obs, act, and rew.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>get_attribute</dt><dd><p>Pending</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="baseenvmanager-nervex-envs-env-manager-base-env-manager-py">
<h2>BaseEnvManager (nervex/envs/env_manager/base_env_manager.py)<a class="headerlink" href="#baseenvmanager-nervex-envs-env-manager-base-env-manager-py" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Overview:</dt><dd><p>Run multiple environment managers in a cyclic serial manner.</p>
</dd>
<dt>Interfaces:</dt><dd><ol class="arabic simple">
<li><p>__init__: Initialization</p></li>
<li><p>launch: Initialize all sub-environments and resources required for state management of sub-environments</p></li>
<li><p>reset: Reset all environments by default. When reset_param passed in, the sub-environment specified by env_id will be reset. It returns all running results</p></li>
<li><p>step: Executes the input action and run a time step. Like reset, you can pass an action dict to operate on certain environments. It returns all running results</p></li>
<li><p>seed: Set the environment random seed, you can pass an env_id list to set specific seeds for certain environments</p></li>
<li><p>close: Close all environments, release resources</p></li>
</ol>
</dd>
<dt>Properties:</dt><dd><ol class="arabic simple">
<li><p>env_num: The number of sub-environments</p></li>
<li><p>active_env: List of all unfinished environments</p></li>
<li><p>ready_obs: Return all the env_id that are not running with the latest observation</p></li>
<li><p>done: Whether all the environments have been completed</p></li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="subprocessenvmanager-nervex-envs-env-manager-subprocess-env-manager-py">
<h2>SubprocessEnvManager (nervex/envs/env_manager/subprocess_env_manager.py)<a class="headerlink" href="#subprocessenvmanager-nervex-envs-env-manager-subprocess-env-manager-py" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Overview:</dt><dd><p>Inherit BaseEnvManager, create subprocess for each environment using multiprocessing to run multiple environments in paralle.</p>
</dd>
<dt>Interfaces:</dt><dd><p>Only the methods that are different or new from BaseEnvManager are listed below</p>
<ol class="arabic simple">
<li><p>launch: Initialize the process of running each sub-environment, and initialize the resources required for state management of the sub-environment</p></li>
<li><p>reset: Send reset command to environmental processes. When reset_param passed in, the reset command is sent to the subprocess specified by env_id. It returns after sending.</p></li>
<li><p>step: Send action commands to environmental processes. Like reset, you can pass an action dict to operate on certain environments. It returns all running results.</p></li>
<li><p>close: Destroy all sub-process, release resources</p></li>
</ol>
</dd>
<dt>Properties:</dt><dd><p>Only the attributes that are different or new from BaseEnvManager are listed below</p>
<ol class="arabic simple">
<li><p>ready_obs: Return all the env_id that finish running step and reset with the latest observation. If all environments are running previous command, wait until at least one finish running</p></li>
<li><p>active_env: List of all running environments</p></li>
</ol>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="replay_buffer_overview_en.html" class="btn btn-neutral float-right" title="Replay Buffer Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="collector_overview_en.html" class="btn btn-neutral float-left" title="Collector Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, X-Lab.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>