

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>league.payoff &mdash; nerveX 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Buffer" href="../worker/replay_buffer/index.html" />
    <link rel="prev" title="league.player" href="player.html" />
    <link href="../../_static/css/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> nerveX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../key_concept/index.html">Key Concept</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro_rl/index.html">Introduction to RL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hands_on/index.html">Hands on RL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../best_practice/index.html">Best Practice</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Doc</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../config/index.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../env/index.html">Env</a></li>
<li class="toctree-l2"><a class="reference internal" href="../policy/index.html">Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model/index.html">Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reward_model/index.html">Reward Model</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">League</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="league.html">league.league</a></li>
<li class="toctree-l3"><a class="reference internal" href="league.html#league-one-vs-one-league">league.one_vs_one_league</a></li>
<li class="toctree-l3"><a class="reference internal" href="player.html">league.player</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">league.payoff</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#shared-payoff">shared_payoff</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../worker/replay_buffer/index.html">Buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../torch_utils/index.html">Torch Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interaction/index.html">Interaction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../feature/index.html">Feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supplementary_rl/index.html">Supplementary of RL</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_dev/index.html">Tutorial-Developer</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nerveX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">API Doc</a> &raquo;</li>
        
          <li><a href="index.html">League</a> &raquo;</li>
        
      <li>league.payoff</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/api_doc/league/payoff.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="league-payoff">
<h1>league.payoff<a class="headerlink" href="#league-payoff" title="Permalink to this headline">¶</a></h1>
<div class="section" id="shared-payoff">
<h2>shared_payoff<a class="headerlink" href="#shared-payoff" title="Permalink to this headline">¶</a></h2>
<div class="section" id="battlerecorddict">
<h3>BattleRecordDict<a class="headerlink" href="#battlerecorddict" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="nervex.league.shared_payoff.BattleRecordDict">
<em class="property">class </em><code class="sig-prename descclassname">nervex.league.shared_payoff.</code><code class="sig-name descname">BattleRecordDict</code><a class="reference internal" href="../../_modules/nervex/league/shared_payoff.html#BattleRecordDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nervex.league.shared_payoff.BattleRecordDict" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>A dict which is used to record battle game result.
Initialized four fixed keys: <cite>wins</cite>, <cite>draws</cite>, <cite>losses</cite>, <cite>games</cite>; Each with value 0.</p>
</dd>
<dt>Interfaces:</dt><dd><p>__mul__</p>
</dd>
</dl>
<dl class="py method">
<dt id="nervex.league.shared_payoff.BattleRecordDict.__mul__">
<code class="sig-name descname">__mul__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">decay</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../../_modules/nervex/league/shared_payoff.html#BattleRecordDict.__mul__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nervex.league.shared_payoff.BattleRecordDict.__mul__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Multiply each key’s value with the input multiplier <code class="docutils literal notranslate"><span class="pre">decay</span></code></p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>decay (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>): The multiplier.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>obj (<code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>): A deepcopied RecordDict after multiplication decay.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="battlesharedpayoff">
<h3>BattleSharedPayoff<a class="headerlink" href="#battlesharedpayoff" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="nervex.league.shared_payoff.BattleSharedPayoff">
<em class="property">class </em><code class="sig-prename descclassname">nervex.league.shared_payoff.</code><code class="sig-name descname">BattleSharedPayoff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cfg</span><span class="p">:</span> <span class="n">easydict.EasyDict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nervex/league/shared_payoff.html#BattleSharedPayoff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nervex.league.shared_payoff.BattleSharedPayoff" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Payoff data structure to record historical match result, this payoff is shared among all the players.
Use LockContext to ensure thread safe, since all players from all threads can access and modify it.</p>
</dd>
<dt>Interface:</dt><dd><p>__getitem__, add_player, update, get_key</p>
</dd>
<dt>Property:</dt><dd><p>players</p>
</dd>
</dl>
<dl class="py method">
<dt id="nervex.league.shared_payoff.BattleSharedPayoff.__getitem__">
<code class="sig-name descname">__getitem__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">players</span><span class="p">:</span> <span class="n">tuple</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="../../_modules/nervex/league/shared_payoff.html#BattleSharedPayoff.__getitem__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nervex.league.shared_payoff.BattleSharedPayoff.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Overview:</dt><dd><p>Get win rates between home players and away players one by one</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>players (<code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code>): A tuple of (home, away), each one is a player or a player list.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>win_rates (<code class="xref py py-obj docutils literal notranslate"><span class="pre">np.ndarray</span></code>): Win rate (squeezed, see Shape for more details)                 between each player from home and each player from away.</p></li>
</ul>
</dd>
<dt>Shape:</dt><dd><ul>
<li><p>win_rates: Assume there are m home players and n away players.(m,n &gt; 0)</p>
<blockquote>
<div><ul class="simple">
<li><p>m != 1 and n != 1: shape is (m, n)</p></li>
<li><p>m == 1: shape is (n)</p></li>
<li><p>n == 1: shape is (m)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="nervex.league.shared_payoff.BattleSharedPayoff.add_player">
<code class="sig-name descname">add_player</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">player</span><span class="p">:</span> <span class="n"><a class="reference internal" href="player.html#nervex.league.player.Player" title="nervex.league.player.Player">nervex.league.player.Player</a></span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../../_modules/nervex/league/shared_payoff.html#BattleSharedPayoff.add_player"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nervex.league.shared_payoff.BattleSharedPayoff.add_player" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Add a player to the shared payoff.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>player (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Player</span></code>): The player to be added. Usually is a new one to the league as well.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="nervex.league.shared_payoff.BattleSharedPayoff.get_key">
<code class="sig-name descname">get_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">home</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">away</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>bool<span class="p">]</span><a class="reference internal" href="../../_modules/nervex/league/shared_payoff.html#BattleSharedPayoff.get_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nervex.league.shared_payoff.BattleSharedPayoff.get_key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Join home player id and away player id in alphabetival order.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>home (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Home player id</p></li>
<li><p>away (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Away player id</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>key (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Tow ids sorted in alphabetical order, and joined by ‘-‘.</p></li>
<li><p>reverse (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Whether the two player ids are reordered.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="nervex.league.shared_payoff.BattleSharedPayoff.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">job_info</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../../_modules/nervex/league/shared_payoff.html#BattleSharedPayoff.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nervex.league.shared_payoff.BattleSharedPayoff.update" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Update payoff with job_info when a job is to be finished.
If update succeeds, return True; If raises an exception when updating, resolve it and return False.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>job_info (<code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>): A dict containing job result information.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>result (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Whether update is successful.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>job_info has at least 5 keys [‘launch_player’, ‘player_id’, ‘env_num’, ‘episode_num’, ‘result’].
Key <code class="docutils literal notranslate"><span class="pre">player_id</span></code> ‘s value is a tuple of (home_id, away_id).
Key <code class="docutils literal notranslate"><span class="pre">result</span></code> ‘s value is a two-layer list with the length of (episode_num, env_num).</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nervex.league.shared_payoff.create_payoff">
<span id="create-payoff"></span><h3>create_payoff<a class="headerlink" href="#module-nervex.league.shared_payoff.create_payoff" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Overview:</dt><dd><p>Given the key (payoff type), now supports keys [‘solo’, ‘battle’],
create a new payoff instance if in payoff_mapping’s values, or raise an KeyError.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>cfg (<code class="xref py py-obj docutils literal notranslate"><span class="pre">EasyDict</span></code>): payoff config containing at least one key ‘type’</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>payoff (<code class="xref py py-obj docutils literal notranslate"><span class="pre">BattleSharedPayoff</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">SoloSharedPayoff</span></code>): the created new payoff,             should be an instance of one of payoff_mapping’s values</p></li>
</ul>
</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../worker/replay_buffer/index.html" class="btn btn-neutral float-right" title="Buffer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="player.html" class="btn btn-neutral float-left" title="league.player" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, X-Lab.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>