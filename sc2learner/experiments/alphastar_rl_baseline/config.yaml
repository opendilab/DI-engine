common:
    name: ZergStat
    time_wrapper_type: cuda
data:
    train:
        dataloader_type: epoch  # [epoch, iter]
        batch_size: 6
        trajectory_len: 48
        trajectory_type: slide_window  # [epoch: [slide_window], iter: [sequential]]
        slide_window_step: 1
        beginning_build_order_prob: 0.8
        use_stat: True
        beginning_build_order_num: 20
        use_global_cumulative_stat: False
        cumulative_stat_prob: 0.5
        use_ceph: True
        use_available_action_transform: True
    eval:
        dataloader_type: epoch
        batch_size: 1
        use_stat: True
        beginning_build_order_num: 20
        use_global_cumulative_stat: False
        use_ceph: True
        use_available_action_transform: True
train:
    use_cuda: True
    max_epochs: 1000
    learning_rate: 1e-3
    weight_decay: 1e-5
    temperature: 1.0
    criterion:
        type: cross_entropy  # [cross_entropy, label_smooth_ce]
        kwargs:  # {label_smooth_ce: [smooth_ratio]}
            smooth_ratio: 0.1
env:
   screen_resolution: 128
   default_step_mul: 8  # not used
   game_steps_per_episode: 43200
   disable_fog: False
   realtime: False
   crop_map_to_playable_area: False

rl_train:
   data_push_length: 64
   use_global_cumulative_stat: True
   use_available_action_transform: True
   use_stat: False
   beginning_build_order_num: 20
   temperature: 0.8

model:
    use_value_network: True
    value:
        winloss:
            name: winloss
            cum_stat_keys: ['unit_build']
            param:
                input_dim: 1536
                activation: 'relu'
                norm_type: 'LN'
                res_dim: 256
                res_num: 16
        build_orders:
            name: build_orders
            cum_stat_keys: ['unit_build', 'effect', 'research']
            param:
                input_dim: 1664
                activation: 'relu'
                norm_type: 'LN'
                res_dim: 256
                res_num: 16
        built_units:
            name: built_units
            cum_stat_keys: ['unit_build']
            param:
                input_dim: 1536
                activation: 'relu'
                norm_type: 'LN'
                res_dim: 256
                res_num: 16
        effects:
            name: effects
            cum_stat_keys: ['effect']
            param:
                input_dim: 1536
                activation: 'relu'
                norm_type: 'LN'
                res_dim: 256
                res_num: 16
        upgrades:
            name: upgrades
            cum_stat_keys: ['research']
            param:
                input_dim: 1536
                activation: 'relu'
                norm_type: 'LN'
                res_dim: 256
                res_num: 16
logger:
    print_freq: 10
    save_freq: 200
    eval_freq: 200
    var_record_type: 'alphastar'
actor:
    heartbeats_freq: 120
    heartbeats_thread: True
manager:
    # not used at the moment
coordinator:
    use_fake_data: True
    fake_model_path: iterations_2200.pth.tar
    fake_stat_path: Zerg_Zerg_6280_d35c22b2d7e462f1481621cbf765709961e3f9a2a99f8f6c6fa814ccffc831d6.stat_processed
replay_buffer:
    meta_maxlen: 4096
    max_reuse: 2
    min_sample_ratio: 2
    alpha: 0.6
    beta: 0.5
    cache_maxlen: 256
    timeout: 8  # times of the seconds of per learning iteration
    
# values in this section is mean to be shared by multiple components
system:
    learner_port: 18293               # learner port
    coordinator_ip: 10.198.6.31       # learner and coordinator are in same cluster
    coordinator_port: 18294
    # manager_ip can be set to 'auto' or the real IP of the manager instance
    # this value is used by actors to find what they should connect and report to
    # if it's set to 'auto', the manager node of the Slurm cluster will be used as the manager
    manager_ip: 'auto'
    manager_port: 18295
    auto_run_actor: False
    use_partitions: ['VI_SP_Y_V100_A', 'VI_SP_Y_V100_B']
    actor_num: [2, 2]
    use_ceph: True  # TODO: there is no support for lustre file on the actor side
    # The paths must end with a /
    ceph_traj_path: 'placeholder'
    ceph_model_path: 'placeholder'
    ceph_stat_path: 'placeholder'
