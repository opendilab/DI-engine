

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>interaction.master.master &mdash; DI-engine 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="interaction.master.connection" href="connection.html" />
    <link rel="prev" title="interaction.master" href="index.html" />
    <link href="../../../_static/css/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> DI-engine
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../key_concept/index.html">Key Concept</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro_rl/index.html">Introduction to RL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hands_on/index.html">Hands on RL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../best_practice/index.html">Best Practice</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Doc</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../config/index.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../env/index.html">Env</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../policy/index.html">Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../model/index.html">Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reward_model/index.html">Reward Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../league/index.html">League</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../worker/learner/index.html">Learner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../worker/collector/index.html">Collector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../worker/replay_buffer/index.html">Buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../worker/coordinator/index.html">Coordinator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rl_utils/index.html">RL Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../torch_utils/index.html">Torch Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../utils/index.html">Utils</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Interaction</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../base/index.html">interaction.base</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">interaction.master</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">interaction.master.master</a></li>
<li class="toctree-l4"><a class="reference internal" href="connection.html">interaction.master.connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="task.html">interaction.master.task</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../slave/index.html">interaction.slave</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exception/index.html">interaction.exception</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index_en.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../feature/index.html">Feature</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../guide/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial_dev/index.html">Tutorial-Developer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture/index.html">Architecture Design</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">DI-engine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">API Doc</a> &raquo;</li>
        
          <li><a href="../index.html">Interaction</a> &raquo;</li>
        
          <li><a href="index.html">interaction.master</a> &raquo;</li>
        
      <li>interaction.master.master</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/api_doc/interaction/master/master.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interaction-master-master">
<h1>interaction.master.master<a class="headerlink" href="#interaction-master-master" title="Permalink to this headline">¶</a></h1>
<div class="section" id="master">
<h2>Master<a class="headerlink" href="#master" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ding.interaction.master.master.Master">
<em class="property">class </em><code class="sig-prename descclassname">ding.interaction.master.master.</code><code class="sig-name descname">Master</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">host</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">heartbeat_tolerance</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">heartbeat_check_span</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">request_retries</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">request_retry_waiting</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">channel</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">my_address</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Interaction master end</p>
</dd>
</dl>
<dl class="py method">
<dt id="ding.interaction.master.master.Master.__contains__">
<code class="sig-name descname">__contains__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.__contains__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Check if the active connection with the given name exist in this master client.
Only connections still alive can be found here.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>name (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Name of the connection</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Whether connection with the given name exist.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.__delitem__">
<code class="sig-name descname">__delitem__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.__delitem__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.__delitem__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Delete connection from this master client, and the deleted connection will be killed as well.
Only connections still alive can be found here.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>name (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Name of the connection</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.__getitem__">
<code class="sig-name descname">__getitem__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.__getitem__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Try get the active connection with the given name.
Only connections still alive can be found here.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>name (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Name of the connection</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Connection object with the given name.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">host</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">heartbeat_tolerance</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">heartbeat_check_span</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">request_retries</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">request_retry_waiting</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">channel</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">my_address</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Constructor of Master</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>host (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[str]</span></code>): Host of the master server, based on flask (None means <cite>0.0.0.0</cite>)</p></li>
<li><p>port (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[int]</span></code>): Port of the master server, based on flask (None means <cite>7235</cite>)</p></li>
<li><p>heartbeat_tolerance: (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[float]</span></code>): Max time tolerance of the heartbeat missing (None means                 <cite>15.0</cite>, minimum is <cite>0.2</cite>, unit: second)</p></li>
<li><p>heartbeat_check_span: (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[float]</span></code>): Timespan between the heartbeat status check (None means                 <cite>1.0</cite>, minimum is <cite>0.1</cite>, unit: second)</p></li>
<li><p>request_retries (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[int]</span></code>): Max times for request retries (None means <cite>5</cite>)</p></li>
<li><p>request_retry_waiting (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[float]</span></code>): Sleep time before requests’ retrying (None means <cite>1.0</cite>,                 unit: second)</p></li>
<li><p>channel (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[int]</span></code>): Channel id for the master client, please make sure that channel id is                 equal to the slave client’s channel id, or the connection cannot be established. (None means <cite>0</cite>,                 but 0 channel is not recommended to be used in production)</p></li>
<li><p>my_address (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[str]</span></code>): The address of current server (None will grep local ip automatically,                 this address will be used when connect to slave, the slave’s request will be send to this address,                 <strong>so please make sure the address can be achieved by slave</strong>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._after_connect">
<code class="sig-name descname">_after_connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status_code</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">success</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">code</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">message</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._after_connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._after_connect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed after trying to establish connection.
Default behaviour is to do nothing and return <cite>None</cite>, you can reload this method to change its behaviour.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>status_code (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>): Status code of the connection request</p></li>
<li><p>success (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Connect success or not</p></li>
<li><p>code (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>): Error code of the connection (<cite>0</cite> means no error,                 other code can be found in <cite>SlaveErrorCode</cite>)</p></li>
<li><p>message (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[str]</span></code>): Connection message of the connection</p></li>
<li><p>data (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[Mapping[str,</span> <span class="pre">Any]]</span></code>): Connection data of the connection (returned by slave end)</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Any</span></code>): Any return data,                 this data will be returned in <cite>connect</cite> method in connection object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._after_disconnect">
<code class="sig-name descname">_after_disconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status_code</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">success</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">code</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">message</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._after_disconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._after_disconnect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed after trying to end connection.
Default behaviour is to do nothing and return <cite>None</cite>, you can reload this method to change its behaviour.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>status_code (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>): Status code of the disconnection request</p></li>
<li><p>success (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Disconnect success or not</p></li>
<li><p>code (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>): Error code of the disconnection (<cite>0</cite> means no error,                 other code can be found in <cite>SlaveErrorCode</cite>)</p></li>
<li><p>message (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[str]</span></code>): Disconnection message of the disconnection</p></li>
<li><p>data (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[Mapping[str,</span> <span class="pre">Any]]</span></code>): Disconnection data of the disconnection (returned by slave end)</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Any</span></code>): Any return data,                 this data will be returned in <cite>disconnect</cite> method in connection object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._after_new_task">
<code class="sig-name descname">_after_new_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status_code</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">success</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">code</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">message</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._after_new_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._after_new_task" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed after trying to create task.
Default behaviour is to do nothing and return <cite>None</cite>,             you can reload this method to change its behaviour, such as return the new task data.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>status_code (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>): Status code of the task request</p></li>
<li><p>success (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Disconnect success or not</p></li>
<li><p>code (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>): Error code of the task request (<cite>0</cite> means no error,                 other code can be found in <cite>SlaveErrorCode</cite>)</p></li>
<li><p>message (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[str]</span></code>): Task message of the task request</p></li>
<li><p>data (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[Mapping[str,</span> <span class="pre">Any]]</span></code>): Task data of the task request (returned by slave end)</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Any</span></code>): Any return data,                 this data will be returned in <cite>start</cite> method in task object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._before_connect">
<code class="sig-name descname">_before_connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._before_connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._before_connect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed before trying to establish connection, connection data is generated here as well.
Default behaviour is to do nothing and return <cite>None</cite>, you can reload this method to change its behaviour.
If exception raised in this method, the connection will be canceled.</p>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Mapping[str,</span> <span class="pre">Any]</span></code>): Connection data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._before_disconnect">
<code class="sig-name descname">_before_disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._before_disconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._before_disconnect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed before trying to end connection, disconnection data is generated here as well.
Default behaviour is to do nothing and return <cite>None</cite>, you can reload this method to change its behaviour.
If exception raised in this method, the disconnection will be canceled.</p>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Mapping[str,</span> <span class="pre">Any]</span></code>): Disconnection data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._before_new_task">
<code class="sig-name descname">_before_new_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._before_new_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._before_new_task" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed before trying to create task.
Default behaviour is to do nothing and return the original task data,             you can reload this method to change its behaviour, such as preprocess the task data.
If exception raised in this method, the task request will be canceled.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>data (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[Mapping[str,</span> <span class="pre">Any]]</span></code>): Original task data</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Mapping[str,</span> <span class="pre">Any]</span></code>): Final task data, which will be send to slave end</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._error_connect">
<code class="sig-name descname">_error_connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error</span><span class="p">:</span> <span class="n">requests.exceptions.RequestException</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._error_connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._error_connect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed after web error occurred in connection request.
Default behaviour is to raise the <cite>error</cite> exception, you can reload this method to change its behaviour,             such as return a proper value like <cite>None</cite>.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>error (<code class="xref py py-obj docutils literal notranslate"><span class="pre">RequestException</span></code>): Error raised from requests</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Any</span></code>): Any data, this data will be returned in <cite>connect</cite> method in connection object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._error_disconnect">
<code class="sig-name descname">_error_disconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error</span><span class="p">:</span> <span class="n">requests.exceptions.RequestException</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._error_disconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._error_disconnect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed after web error occurred in disconnection request.
Default behaviour is to raise the <cite>error</cite> exception, you can reload this method to change its behaviour,             such as return a proper value like <cite>None</cite>.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>error (<code class="xref py py-obj docutils literal notranslate"><span class="pre">RequestException</span></code>): Error raised from requests</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Any</span></code>): Any data, this data will be returned in <cite>disconnect</cite> method in connection object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master._error_new_task">
<code class="sig-name descname">_error_new_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error</span><span class="p">:</span> <span class="n">requests.exceptions.RequestException</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master._error_new_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master._error_new_task" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Behaviours executed after web error occurred in task request.
Default behaviour is to raise the <cite>error</cite> exception, you can reload this method to change its behaviour,             such as return a proper value like <cite>None</cite>.</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>error (<code class="xref py py-obj docutils literal notranslate"><span class="pre">RequestException</span></code>): Error raised from requests</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Any</span></code>): Any data, this data will be returned in <cite>start</cite> method in task object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.join">
<code class="sig-name descname">join</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.join"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.join" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Overview:</dt><dd><p>Wait until current slave client is down completely.
Here are the steps executed inside in order:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Wait until the http server thread down</p></li>
<li><p>Wait until the heartbeat check thread down</p></li>
<li><p>Wait until the result-processing thread down</p></li>
</ol>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.my_address">
<em class="property">property </em><code class="sig-name descname">my_address</code><a class="headerlink" href="#ding.interaction.master.master.Master.my_address" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Get my address property of current master client.</p>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): My address which can be used to establish connection from slave end to here.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.new_connection">
<code class="sig-name descname">new_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">host</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">https</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="connection.html#ding.interaction.master.connection.SlaveConnectionProxy" title="ding.interaction.master.connection.SlaveConnectionProxy">ding.interaction.master.connection.SlaveConnectionProxy</a><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.new_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.new_connection" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Create a new connection object to slave end (but <strong>the connection will be established immediately</strong>             before <cite>connect</cite> method in connection object is called).</p>
</dd>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>name (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Name of the connection (this name is an unique label used in this master client)</p></li>
<li><p>host (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>): Host of the slave end</p></li>
<li><p>port (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[int]</span></code>): Port of the slave end (None means <cite>7236</cite>)</p></li>
<li><p>https (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): Use https to connect or not (Default is <cite>False</cite>)</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">SlaveConnectionProxy</span></code>): A connection object represents the connection from here to the                 slave end. More actions can be operated by this connection object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.ping">
<code class="sig-name descname">ping</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.ping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.ping" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Ping the current http server, check if it still run properly.</p>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>): The http server run properly or not.                 <cite>True</cite> means run properly, otherwise return <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.shutdown">
<code class="sig-name descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Overview:</dt><dd><p>Shutdown current master client.
A shutdown request will be sent to the http server, and the shutdown signal will be apply into the             threads, the server will be down soon (You can use <cite>join</cite> method to wait until that time).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ding.interaction.master.master.Master.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/ding/interaction/master/master.html#Master.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ding.interaction.master.master.Master.start" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Overview:</dt><dd><p>Start current master client
Here are the steps executed inside in order:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Start the result-processing thread</p></li>
<li><p>Start the heartbeat check thread</p></li>
<li><p>Start the http server thread</p></li>
<li><p>Wait until the http server is online (can be pinged)</p></li>
</ol>
</div></blockquote>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="connection.html" class="btn btn-neutral float-right" title="interaction.master.connection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="interaction.master" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, OpenDILab Contributors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>